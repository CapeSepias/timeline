// 2fef14c - 2013-02-24
(function(b,g,h,f){if(!b.wellcomeTimelineScriptIncluded){b.wellcomeTimelineScriptIncluded=!0;for(var j=g.getElementsByTagName("script"),d,l=j.length-1;0<=l;l--){var m=j[l];if(m.src){d=m.src;break}}var e,k,a=!1;if(!(e=b.jQuery)||h>e.fn.jquery||f(e,d,a)){var c=g.createElement("script");c.type="text/javascript";c.src="//ajax.googleapis.com/ajax/libs/jquery/"+h+"/jquery.min.js";c.onload=c.onreadystatechange=function(){if(!a&&(!(k=this.readyState)||"loaded"==k||"complete"==k))f((e=b.jQuery).noConflict(1), d,a=!0),e(c).remove()};g.documentElement.childNodes[0].appendChild(c)}}})(window,document,"1.7.2",function(b,g){function h(d,l,m){function e(){c&&(f?(c.width(b(this).width()),c.height(b(this).height())):(c.width(a.width()),c.height(a.height())))}var k,a,c,f,h,n,p;a=b(d);a.empty();d=a.attr("data-uri");d=encodeURIComponent(d);f=!1;h=a.height();var q=a.position();n=q.top;p=q.left;b(window).resize(function(){e()});window.onorientationchange=function(){e()};k=new easyXDM.Socket({remote:"http://"+j+"/timeline.html?isHomeDomain="+ l+"&isOnlyInstance="+m+"&dataUri="+d+"&embedScriptUri="+g,container:a.get(0),props:{style:{width:"100%",height:a.height()+"px"},scrolling:"no"},onReady:function(){c=a.find("iframe")},onMessage:function(a){a=b.parseJSON(a);switch(a.eventName){case "onToggleFullScreen":(f=a.eventObject)?(b("html").css("overflow","hidden"),window.scrollTo(0,0),c.css({position:"fixed","z-index":9999,height:b(window).height(),width:b(window).width(),top:0,left:0})):(b("html").css("overflow","auto"),c.css({position:"static", "z-index":"auto",height:h,width:"100%",top:n,left:p}));e();k.postMessage(JSON.stringify({eventName:"onToggleFullScreen",eventObject:f}));break;case "onRedirect":window.location.replace(a.eventObject);break;case "onRefresh":window.location.reload();break;case "onTrackEvent":"undefined"!==typeof _trackEvent&&_trackEvent(a.eventObject.category,a.eventObject.action,a.eventObject.label,a.eventObject.value,a.eventObject.noninteraction);break;default:jQuery(document).trigger(a.eventName,[a.eventObject])}}})} b.support.cors=!0;var f=document.createElement("a");f.href=g;var j=f.hostname;b.when(b.getScript("//"+j+"/js/libs/easyXDM.min.js"),b.getScript("//"+j+"/js/libs/json2.min.js")).done(function(){for(var d=b(".timeline"),f=document.domain===j,g=1===d.length,e=0;e<d.length;e++)h(d[e],f,g)})});
